<!DOCTYPE html>
<html lang="ja">
<head>
  <style>
    .error-message {
      color: red;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <div id="error-message" class="error-message"></div>

  <script>
    function generateQRCode() {
      const text = document.getElementById('textInput').value;
      const qrCodeDiv = document.getElementById('qrcode');
      const errorMessageDiv = document.getElementById('error-message');
      qrCodeDiv.innerHTML = "";
      errorMessageDiv.textContent = "";

      // 入力値のバリデーション
      if (!text.trim()) {
        errorMessageDiv.textContent = "文字列を入力してください。";
        return;
      }

      // QRコード生成
      QRCode.toCanvas(qrCodeDiv, text, {
        // デザインのカスタマイズ例 (必要に応じて調整)
        width: 256,
        height: 256,
        colorDark: "#000",
        colorLight: "#fff",
        errorCorrectionLevel: 'H' // 高いエラー訂正レベル
      }, function (error) {
        if (error) {
          console.error(error);
          errorMessageDiv.textContent = "QRコード生成に失敗しました。原因: " + error.message;
        }
      });
    }
  </script>
</body>
</html>
